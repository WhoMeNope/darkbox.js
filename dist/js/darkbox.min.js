"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery")):window.darkbox=e(window.jQuery)}(0,function(t){function e(e,o){if(this.options=t.extend({},this.constructor.defaults),this.setOptions(o),this.$overlay=t("#darkboxOverlay"),this.$darkbox=t("#darkbox"),this.$darkboxLeft=t("#darkbox-left"),this.$darkboxRight=t("#darkbox-right"),this.$darkboxCancel=t("#darkbox-cancel"),this.$darkboxTitle=t("#darkbox-title"),this.$darkboxTitleText=t("#darkboxTitleText"),this.$clonnedNode=null,this.options.startWithCurrent){var i=e.attr("src");Array.isArray(this.options.images)||(this.options.images=[]),0!=this.options.images.length&&i===this.options.images[0]||this.options.images.unshift(i)}this.currentImageIndex=0,this.options.images.length>0&&this.start(e)}var o=function(){function o(){var e=this;_classCallCheck(this,o),t(document).ready(function(){e.build()})}return _createClass(o,[{key:"build",value:function(){t('<div id="darkboxOverlay">\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div id="darkbox">\n\t\t\t\t</div>\n\t\t\t\t<div id="darkbox-left">\n\t\t\t\t\t<img src="./assets/darkbox/left.svg" alt=""/>\n\t\t\t\t</div>\n\t\t\t\t<div id="darkbox-right">\n\t\t\t\t\t<img src="./assets/darkbox/right.svg" alt=""/>\n\t\t\t\t</div>\n\t\t\t\t<div id="darkbox-cancel">\n\t\t\t\t\t<img src="./assets/darkbox/close.svg" alt=""/>\n\t\t\t\t</div>\n\t\t\t\t<div id="darkbox-title">\n\t\t\t\t\t<h1 id="darkboxTitleText"></h1>\n\t\t\t\t</div>').appendTo(t("body"))}},{key:"start",value:function(t,o){return new e(t,o)}}]),o}();return e.defaults={images:[],disablePageScrolling:!0,startWithCurrent:!0,wrapAround:!1,endCallback:null},e.prototype.setOptions=function(e){t.extend(this.options,e)},e.prototype.start=function(e){var o=this;this.options.disablePageScrolling&&t("body").addClass("db-disable-scrolling"),this.$darkbox.empty();var i=e.clone(!1);t(i).attr("src",this.options.images[0]),t(i).css("position","absolute"),t(i).css("width",e.width()+"px"),t(i).css("height",e.height()+"px");var s=e.parent().offset();t(i).css("left",s.left+"px"),t(i).css("top",s.top+"px"),t(i).appendTo(this.$darkbox),this.$clonnedNode=i,this.$darkbox.show(),this.$overlay.addClass("show"),this.$overlay.addClass("fill"),this.options.images.length>1&&(this.$darkboxLeft.show(),this.$darkboxRight.show()),this.$darkboxCancel.show(),this.$darkboxTitle.show(),t(this.$darkboxTitleText).text("Image "+(this.currentImageIndex+1)+" of "+this.options.images.length),setTimeout(function(){o.options.images.length>1&&(o.$darkboxLeft.addClass("show"),o.$darkboxRight.addClass("show")),o.$darkboxCancel.addClass("show"),o.$darkboxTitle.addClass("show")},400),t(this.$clonnedNode).addClass("straight"),t(this.$clonnedNode).animate({left:(t(window).width()-e.width())/2,top:(t(window).height()-e.height())/2},400,"swing",function(){t(o.$clonnedNode).addClass("scale"),o.enableKeyboardNav(),t(o.$darkboxLeft).on("click",function(){o.previousImage()}),t(o.$darkboxRight).on("click",function(){o.nextImage()}),t(o.$darkboxCancel).on("click",function(){o.end()})})},e.prototype.previousImage=function(){0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.options.images.length>1&&this.changeImage(this.options.images.length-1)},e.prototype.nextImage=function(){this.currentImageIndex!==this.options.images.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.options.images.length>1&&this.changeImage(0)},e.prototype.changeImage=function(e){this.currentImageIndex=e,t(this.$darkboxTitleText).text("Image "+(e+1)+" of "+this.options.images.length),t(this.$clonnedNode).attr("src",this.options.images[e])},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var e=t.keyCode,o=String.fromCharCode(e).toLowerCase();27===e||o.match(/x|o|c/)?this.end():"p"===o||37===e?this.previousImage():"n"!==o&&39!==e||this.nextImage()},e.prototype.end=function(){var e=this;this.disableKeyboardNav(),t(this.$darkboxLeft).off("click"),t(this.$darkboxRight).off("click"),t(this.$darkboxCancel).off("click"),this.$darkboxLeft.removeClass("show"),this.$darkboxRight.removeClass("show"),this.$darkboxCancel.removeClass("show"),this.$darkboxTitle.removeClass("show"),t(this.$clonnedNode).animate({opacity:0},300,"swing",function(){e.$darkbox.hide(),e.$darkboxLeft.hide(),e.$darkboxRight.hide(),e.$darkboxCancel.hide(),e.$darkboxTitle.hide()}),this.$overlay.removeClass("fill"),setTimeout(function(){e.$overlay.removeClass("show"),t("body").removeClass("db-disable-scrolling")},600);var o=this.options.endCallback;o&&null!=o&&"function"==typeof o&&setTimeout(function(){e.options.endCallback()},200)},new o});