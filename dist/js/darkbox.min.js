"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,o){"function"==typeof define&&define.amd?define(["jquery"],o):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=o(require("jquery")):window.darkbox=o(window.jQuery)}(0,function(t){function o(){this.init()}function e(o,e){if(this.options=t.extend({},this.constructor.defaults),this.setOptions(e),this.$overlay=t("#darkboxOverlay"),this.$darkbox=t("#darkbox"),this.$darkboxLeft=t("#darkbox-left"),this.$darkboxRight=t("#darkbox-right"),this.$darkboxCancel=t("#darkbox-cancel"),this.$darkboxTitle=t("#darkbox-title"),this.$darkboxTitleText=t("#darkboxTitleText"),this.$clonnedNode=null,this.options.startWithCurrent){var i=o.attr("src");Array.isArray(this.options.images)||(this.options.images=[]),0!=this.options.images.length&&i===this.options.images[0]||this.options.images.unshift(i)}this.currentImageIndex=0,this.options.images.length>0&&this.start(o)}return o.prototype.init=function(){var o=this;t(document).ready(function(){o.build()})},o.prototype.build=function(){t('<div id="darkboxOverlay">\n\t\t</div>\n\t\t\n\t\t<div id="darkbox">\n\t\t</div>\n\t\t<div id="darkbox-left">\n\t\t\t<img src="../assets/darkbox/left.svg" alt=""/>\n\t\t</div>\n\t\t<div id="darkbox-right">\n\t\t\t<img src="../assets/darkbox/right.svg" alt=""/>\n\t\t</div>\n\t\t<div id="darkbox-cancel">\n\t\t\t<img src="../assets/darkbox/close.svg" alt=""/>\n\t\t</div>\n\t\t<div id="darkbox-title">\n\t\t\t<h1 id="darkboxTitleText"></h1>\n\t\t</div>').appendTo(t("body"))},o.prototype.start=function(t,o){return new e(t,o)},e.defaults={images:[],disablePageScrolling:!0,startWithCurrent:!0,wrapAround:!1,endCallback:null},e.prototype.setOptions=function(o){t.extend(this.options,o)},e.prototype.start=function(o){var e=this;this.options.disablePageScrolling&&t("body").addClass("db-disable-scrolling"),this.$darkbox.empty();var i=o.clone(!1);t(i).attr("src",this.options.images[0]),t(i).css("position","absolute"),t(i).css("width",o.width()+"px"),t(i).css("height",o.height()+"px");var s=o.parent().offset();t(i).css("left",s.left+"px"),t(i).css("top",s.top+"px"),t(i).appendTo(this.$darkbox),this.$clonnedNode=i,this.$darkbox.show(),this.$overlay.addClass("show"),this.$overlay.addClass("fill"),this.$darkboxLeft.show(),this.$darkboxRight.show(),this.$darkboxCancel.show(),this.$darkboxTitle.show(),t(this.$darkboxTitleText).text("Image "+(this.currentImageIndex+1)+" of "+this.options.images.length),setTimeout(function(){e.$darkboxLeft.addClass("show"),e.$darkboxRight.addClass("show"),e.$darkboxCancel.addClass("show"),e.$darkboxTitle.addClass("show")},400),t(this.$clonnedNode).addClass("straight"),t(this.$clonnedNode).animate({left:(t(window).width()-o.width())/2,top:(t(window).height()-o.height())/2},400,"swing",function(){t(e.$clonnedNode).addClass("scale"),e.enableKeyboardNav(),t(e.$darkboxLeft).on("click",function(){e.previousImage()}),t(e.$darkboxRight).on("click",function(){e.nextImage()}),t(e.$darkboxCancel).on("click",function(){e.end()})})},e.prototype.previousImage=function(){0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.options.images.length>1&&this.changeImage(this.options.images.length-1)},e.prototype.nextImage=function(){this.currentImageIndex!==this.options.images.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.options.images.length>1&&this.changeImage(0)},e.prototype.changeImage=function(o){this.currentImageIndex=o,t(this.$darkboxTitleText).text("Image "+(o+1)+" of "+this.options.images.length),t(this.$clonnedNode).attr("src",this.options.images[o])},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var o=t.keyCode,e=String.fromCharCode(o).toLowerCase();27===o||e.match(/x|o|c/)?this.end():"p"===e||37===o?this.previousImage():"n"!==e&&39!==o||this.nextImage()},e.prototype.end=function(){var o=this;this.disableKeyboardNav(),t(this.$darkboxLeft).off("click"),t(this.$darkboxRight).off("click"),t(this.$darkboxCancel).off("click"),this.$darkboxLeft.removeClass("show"),this.$darkboxRight.removeClass("show"),this.$darkboxCancel.removeClass("show"),this.$darkboxTitle.removeClass("show"),t(this.$clonnedNode).animate({opacity:0},300,"swing",function(){o.$darkbox.hide(),o.$darkboxLeft.hide(),o.$darkboxRight.hide(),o.$darkboxCancel.hide(),o.$darkboxTitle.hide()}),this.$overlay.removeClass("fill"),setTimeout(function(){o.$overlay.removeClass("show"),t("body").removeClass("db-disable-scrolling")},600);var e=this.options.endCallback;e&&null!=e&&"function"==typeof e&&setTimeout(function(){o.options.endCallback()},200)},new o});